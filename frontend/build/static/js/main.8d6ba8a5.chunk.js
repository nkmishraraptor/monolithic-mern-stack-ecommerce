(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{29:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},38:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(1),c=a(12),i=a.n(c),o=(a(37),a(2)),s=a(5),m=(a(38),a(4)),u=a.n(m);const E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return async l=>{try{l({type:"PRODUCT_LIST_REQUEST"});const{data:n}=await u.a.get("/api/products?category="+e+"&searchKeyword="+t+"&sortOrder="+a);l({type:"PRODUCT_LIST_SUCCESS",payload:n})}catch(n){l({type:"PRODUCT_LIST_FAIL",payload:n.message})}}};function d(e){return e.value?n.a.createElement("div",{className:"rating"},n.a.createElement("span",null,n.a.createElement("i",{className:e.value>=1?"fa fa-star":e.value>=.5?"fa fa-star-half-o":"fa fa-star-o"})),n.a.createElement("span",null,n.a.createElement("i",{className:e.value>=2?"fa fa-star":e.value>=1.5?"fa fa-star-half-o":"fa fa-star-o"})),n.a.createElement("span",null,n.a.createElement("i",{className:e.value>=3?"fa fa-star":e.value>=2.5?"fa fa-star-half-o":"fa fa-star-o"})),n.a.createElement("span",null,n.a.createElement("i",{className:e.value>=4?"fa fa-star":e.value>=3.5?"fa fa-star-half-o":"fa fa-star-o"})),n.a.createElement("span",null,n.a.createElement("i",{className:e.value>=5?"fa fa-star":e.value>=4.5?"fa fa-star-half-o":"fa fa-star-o"})),n.a.createElement("span",null,e.text?e.text:"")):n.a.createElement("div",null)}var p=function(e){const[t,a]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),s=e.match.params.id?e.match.params.id:"",m=Object(r.c)(e=>e.productList),{products:u,loading:p,error:y}=m,g=Object(r.b)();return Object(l.useEffect)(()=>(g(E(s)),()=>{}),[s]),n.a.createElement(n.a.Fragment,null,s&&n.a.createElement("h2",null,s),n.a.createElement("ul",{className:"filter"},n.a.createElement("li",null,n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),g(E(s,t,c))}},n.a.createElement("input",{name:"searchKeyword",onChange:e=>a(e.target.value)}),n.a.createElement("button",{type:"submit"},"Search"))),n.a.createElement("li",null,"Sort By"," ",n.a.createElement("select",{name:"sortOrder",onChange:e=>{i(e.target.value),g(E(s,t,c))}},n.a.createElement("option",{value:""},"Newest"),n.a.createElement("option",{value:"lowest"},"Lowest"),n.a.createElement("option",{value:"highest"},"Highest")))),p?n.a.createElement("div",null,"Loading..."):y?n.a.createElement("div",null,y):n.a.createElement("ul",{className:"products"},u.map(e=>n.a.createElement("li",{key:e._id},n.a.createElement("div",{className:"product"},n.a.createElement(o.b,{to:"/product/"+e._id},n.a.createElement("img",{className:"product-image",src:e.image,alt:"product"})),n.a.createElement("div",{className:"product-name"},n.a.createElement(o.b,{to:"/product/"+e._id},e.name)),n.a.createElement("div",{className:"product-brand"},e.brand),n.a.createElement("div",{className:"product-price"},"$",e.price),n.a.createElement("div",{className:"product-rating"},n.a.createElement(d,{value:e.rating,text:e.numReviews+" reviews"})))))))};var y=function(e){const[t,a]=Object(l.useState)(1),[c,i]=Object(l.useState)(0),[s,m]=Object(l.useState)(""),E=Object(r.c)(e=>e.userSignin),{userInfo:p}=E,y=Object(r.c)(e=>e.productDetails),{product:g,loading:S,error:h}=y,v=Object(r.c)(e=>e.productReviewSave),{success:_}=v,b=Object(r.b)();return Object(l.useEffect)(()=>{var t;return _&&(alert("Review submitted successfully."),i(0),m(""),b({type:"PRODUCT_REVIEW_SAVE_RESET"})),b((t=e.match.params.id,async e=>{try{e({type:"PRODUCT_DETAILS_REQUEST",payload:t});const{data:a}=await u.a.get("/api/products/"+t);e({type:"PRODUCT_DETAILS_SUCCESS",payload:a})}catch(h){e({type:"PRODUCT_DETAILS_FAIL",payload:h.message})}})),()=>{}},[_]),n.a.createElement("div",null,n.a.createElement("div",{className:"back-to-result"},n.a.createElement(o.b,{to:"/"},"Back to result")),S?n.a.createElement("div",null,"Loading..."):h?n.a.createElement("div",null,h," "):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"details"},n.a.createElement("div",{className:"details-image"},n.a.createElement("img",{src:g.image,alt:"product"})),n.a.createElement("div",{className:"details-info"},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("h4",null,g.name)),n.a.createElement("li",null,n.a.createElement("a",{href:"#reviews"},n.a.createElement(d,{value:g.rating,text:g.numReviews+" reviews"}))),n.a.createElement("li",null,"Price: ",n.a.createElement("b",null,"$",g.price)),n.a.createElement("li",null,"Description:",n.a.createElement("div",null,g.description)))),n.a.createElement("div",{className:"details-action"},n.a.createElement("ul",null,n.a.createElement("li",null,"Price: ",g.price),n.a.createElement("li",null,"Status:"," ",g.countInStock>0?"In Stock":"Unavailable."),n.a.createElement("li",null,"Qty:"," ",n.a.createElement("select",{value:t,onChange:e=>{a(e.target.value)}},[...Array(g.countInStock).keys()].map(e=>n.a.createElement("option",{key:e+1,value:e+1},e+1)))),n.a.createElement("li",null,g.countInStock>0&&n.a.createElement("button",{onClick:()=>{e.history.push("/cart/"+e.match.params.id+"?qty="+t)},className:"button primary"},"Add to Cart"))))),n.a.createElement("div",{className:"content-margined"},n.a.createElement("h2",null,"Reviews"),!g.reviews.length&&n.a.createElement("div",null,"There is no review"),n.a.createElement("ul",{className:"review",id:"reviews"},g.reviews.map(e=>n.a.createElement("li",{key:e._id},n.a.createElement("div",null,e.name),n.a.createElement("div",null,n.a.createElement(d,{value:e.rating})),n.a.createElement("div",null,e.createdAt.substring(0,10)),n.a.createElement("div",null,e.comment))),n.a.createElement("li",null,n.a.createElement("h3",null,"Write a customer review"),p?n.a.createElement("form",{onSubmit:t=>{var a,l;t.preventDefault(),b((a=e.match.params.id,l={name:p.name,rating:c,comment:s},async(e,t)=>{try{const{userSignin:{userInfo:{token:n}}}=t();e({type:"PRODUCT_REVIEW_SAVE_REQUEST",payload:l});const{data:r}=await u.a.post(`/api/products/${a}/reviews`,l,{headers:{Authorization:"Bearer "+n}});e({type:"PRODUCT_REVIEW_SAVE_SUCCESS",payload:r})}catch(h){e({type:"PRODUCT_REVIEW_SAVE_FAIL",payload:h.message})}}))}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"rating"},"Rating"),n.a.createElement("select",{name:"rating",id:"rating",value:c,onChange:e=>i(e.target.value)},n.a.createElement("option",{value:"1"},"1- Poor"),n.a.createElement("option",{value:"2"},"2- Fair"),n.a.createElement("option",{value:"3"},"3- Good"),n.a.createElement("option",{value:"4"},"4- Very Good"),n.a.createElement("option",{value:"5"},"5- Excelent"))),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"comment"},"Comment"),n.a.createElement("textarea",{name:"comment",value:s,onChange:e=>m(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Submit")))):n.a.createElement("div",null,"Please ",n.a.createElement(o.b,{to:"/signin"},"Sign-in")," to write a review."))))))},g=a(11),S=a.n(g);const h=(e,t)=>async(a,l)=>{try{const{data:n}=await u.a.get("/api/products/"+e);a({type:"CART_ADD_ITEM",payload:{product:n._id,name:n.name,image:n.image,price:n.price,countInStock:n.countInStock,qty:t}});const{cart:{cartItems:r}}=l();S.a.set("cartItems",JSON.stringify(r))}catch(n){}};var v=function(e){const t=Object(r.c)(e=>e.cart),{cartItems:a}=t,c=e.match.params.id,i=e.location.search?Number(e.location.search.split("=")[1]):1,s=Object(r.b)(),m=e=>{s((e=>(t,a)=>{t({type:"CART_REMOVE_ITEM",payload:e});const{cart:{cartItems:l}}=a();S.a.set("cartItems",JSON.stringify(l))})(e))};return Object(l.useEffect)(()=>{c&&s(h(c,i))},[]),n.a.createElement("div",{className:"cart"},n.a.createElement("div",{className:"cart-list"},n.a.createElement("ul",{className:"cart-list-container"},n.a.createElement("li",null,n.a.createElement("h3",null,"Shopping Cart"),n.a.createElement("div",null,"Price")),0===a.length?n.a.createElement("div",null,"Cart is empty"):a.map(e=>n.a.createElement("li",null,n.a.createElement("div",{className:"cart-image"},n.a.createElement("img",{src:e.image,alt:"product"})),n.a.createElement("div",{className:"cart-name"},n.a.createElement("div",null,n.a.createElement(o.b,{to:"/product/"+e.product},e.name)),n.a.createElement("div",null,"Qty:",n.a.createElement("select",{value:e.qty,onChange:t=>s(h(e.product,t.target.value))},[...Array(e.countInStock).keys()].map(e=>n.a.createElement("option",{key:e+1,value:e+1},e+1))),n.a.createElement("button",{type:"button",className:"button",onClick:()=>m(e.product)},"Delete"))),n.a.createElement("div",{className:"cart-price"},"$",e.price))))),n.a.createElement("div",{className:"cart-action"},n.a.createElement("h3",null,"Subtotal ( ",a.reduce((e,t)=>e+t.qty,0)," items) : $ ",a.reduce((e,t)=>e+t.price*t.qty,0)),n.a.createElement("button",{onClick:()=>{e.history.push("/signin?redirect=shipping")},className:"button primary full-width",disabled:0===a.length},"Proceed to Checkout")))};var _=function(e){const[t,a]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),s=Object(r.c)(e=>e.userSignin),{loading:m,userInfo:E,error:d}=s,p=Object(r.b)(),y=e.location.search?e.location.search.split("=")[1]:"/";return Object(l.useEffect)(()=>(E&&e.history.push(y),()=>{}),[E]),n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),p(((e,t)=>async a=>{a({type:"USER_SIGNIN_REQUEST",payload:{email:e,password:t}});try{const{data:l}=await u.a.post("/api/users/signin",{email:e,password:t});a({type:"USER_SIGNIN_SUCCESS",payload:l}),S.a.set("userInfo",JSON.stringify(l))}catch(d){a({type:"USER_SIGNIN_FAIL",payload:d.message})}})(t,c))}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"Sign-In")),n.a.createElement("li",null,m&&n.a.createElement("div",null,"Loading..."),d&&n.a.createElement("div",null,d)),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",name:"email",id:"email",onChange:e=>a(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",onChange:e=>i(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Signin")),n.a.createElement("li",null,"New to amazona?"),n.a.createElement("li",null,n.a.createElement(o.b,{to:"/"===y?"register":"register?redirect="+y,className:"button secondary text-center"},"Create your amazona account")))))};var b=function(e){const[t,a]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),[s,m]=Object(l.useState)(""),[E,d]=Object(l.useState)(""),p=Object(r.c)(e=>e.userRegister),{loading:y,userInfo:g,error:h}=p,v=Object(r.b)(),_=e.location.search?e.location.search.split("=")[1]:"/";return Object(l.useEffect)(()=>(g&&e.history.push(_),()=>{}),[g]),n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),v(((e,t,a)=>async l=>{l({type:"USER_REGISTER_REQUEST",payload:{name:e,email:t,password:a}});try{const{data:n}=await u.a.post("/api/users/register",{name:e,email:t,password:a});l({type:"USER_REGISTER_SUCCESS",payload:n}),S.a.set("userInfo",JSON.stringify(n))}catch(h){l({type:"USER_REGISTER_FAIL",payload:h.message})}})(t,c,s))}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"Create Account")),n.a.createElement("li",null,y&&n.a.createElement("div",null,"Loading..."),h&&n.a.createElement("div",null,h)),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"name",name:"name",id:"name",onChange:e=>a(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",name:"email",id:"email",onChange:e=>i(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",onChange:e=>m(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"rePassword"},"Re-Enter Password"),n.a.createElement("input",{type:"password",id:"rePassword",name:"rePassword",onChange:e=>d(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Register")),n.a.createElement("li",null,"Already have an account?",n.a.createElement(o.b,{to:"/"===_?"signin":"signin?redirect="+_,className:"button secondary text-center"},"Create your amazona account")))))};var R=function(e){const[t,a]=Object(l.useState)(!1),[c,i]=Object(l.useState)(""),[o,s]=Object(l.useState)(""),[m,d]=Object(l.useState)(""),[p,y]=Object(l.useState)(""),[g,S]=Object(l.useState)(""),[h,v]=Object(l.useState)(""),[_,b]=Object(l.useState)(""),[R,f]=Object(l.useState)(""),[C,O]=Object(l.useState)(!1),I=Object(r.c)(e=>e.productList),{loading:T,products:D,error:N}=I,A=Object(r.c)(e=>e.productSave),{loading:U,success:P,error:w}=A,L=Object(r.c)(e=>e.productDelete),{loading:j,success:k,error:F}=L,V=Object(r.b)();Object(l.useEffect)(()=>(P&&a(!1),V(E()),()=>{}),[P,k]);const Q=e=>{a(!0),i(e._id),s(e.name),d(e.price),f(e.description),y(e.image),S(e.brand),v(e.category),b(e.countInStock)},x=e=>{var t;V((t=e._id,async(e,a)=>{try{const{userSignin:{userInfo:l}}=a();e({type:"PRODUCT_DELETE_REQUEST",payload:t});const{data:n}=await u.a.delete("/api/products/"+t,{headers:{Authorization:"Bearer "+l.token}});e({type:"PRODUCT_DELETE_SUCCESS",payload:n,success:!0})}catch(N){e({type:"PRODUCT_DELETE_FAIL",payload:N.message})}}))};return n.a.createElement("div",{className:"content content-margined"},n.a.createElement("div",{className:"product-header"},n.a.createElement("h3",null,"Products"),n.a.createElement("button",{className:"button primary",onClick:()=>Q({})},"Create Product")),t&&n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:e=>{var t;e.preventDefault(),V((t={_id:c,name:o,price:m,image:p,brand:g,category:h,countInStock:_,description:R},async(e,a)=>{try{e({type:"PRODUCT_SAVE_REQUEST",payload:t});const{userSignin:{userInfo:l}}=a();if(t._id){const{data:a}=await u.a.put("/api/products/"+t._id,t,{headers:{Authorization:"Bearer "+l.token}});e({type:"PRODUCT_SAVE_SUCCESS",payload:a})}else{const{data:a}=await u.a.post("/api/products",t,{headers:{Authorization:"Bearer "+l.token}});e({type:"PRODUCT_SAVE_SUCCESS",payload:a})}}catch(N){e({type:"PRODUCT_SAVE_FAIL",payload:N.message})}}))}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"Create Product")),n.a.createElement("li",null,U&&n.a.createElement("div",null,"Loading..."),w&&n.a.createElement("div",null,w)),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"text",name:"name",value:o,id:"name",onChange:e=>s(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"price"},"Price"),n.a.createElement("input",{type:"text",name:"price",value:m,id:"price",onChange:e=>d(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"image"},"Image"),n.a.createElement("input",{type:"text",name:"image",value:p,id:"image",onChange:e=>y(e.target.value)}),n.a.createElement("input",{type:"file",onChange:e=>{const t=e.target.files[0],a=new FormData;a.append("image",t),O(!0),u.a.post("/api/uploads",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{y(e.data),O(!1)}).catch(e=>{console.log(e),O(!1)})}}),C&&n.a.createElement("div",null,"Uploading...")),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"brand"},"Brand"),n.a.createElement("input",{type:"text",name:"brand",value:g,id:"brand",onChange:e=>S(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"countInStock"},"CountInStock"),n.a.createElement("input",{type:"text",name:"countInStock",value:_,id:"countInStock",onChange:e=>b(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"name"},"Category"),n.a.createElement("input",{type:"text",name:"category",value:h,id:"category",onChange:e=>v(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"description"},"Description"),n.a.createElement("textarea",{name:"description",value:R,id:"description",onChange:e=>f(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},c?"Update":"Create")),n.a.createElement("li",null,n.a.createElement("button",{type:"button",onClick:()=>a(!1),className:"button secondary"},"Back"))))),n.a.createElement("div",{className:"product-list"},n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"ID"),n.a.createElement("th",null,"Name"),n.a.createElement("th",null,"Price"),n.a.createElement("th",null,"Category"),n.a.createElement("th",null,"Brand"),n.a.createElement("th",null,"Action"))),n.a.createElement("tbody",null,D.map(e=>n.a.createElement("tr",{key:e._id},n.a.createElement("td",null,e._id),n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.price),n.a.createElement("td",null,e.category),n.a.createElement("td",null,e.brand),n.a.createElement("td",null,n.a.createElement("button",{className:"button",onClick:()=>Q(e)},"Edit")," ",n.a.createElement("button",{className:"button",onClick:()=>x(e)},"Delete"))))))))};var f=function(e){return n.a.createElement("div",{className:"checkout-steps"},n.a.createElement("div",{className:e.step1?"active":""},"Signin"),n.a.createElement("div",{className:e.step2?"active":""},"Shipping"),n.a.createElement("div",{className:e.step3?"active":""},"Payment"),n.a.createElement("div",{className:e.step4?"active":""},"Place Order"))};var C=function(e){const[t,a]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),[o,s]=Object(l.useState)(""),[m,u]=Object(l.useState)(""),E=Object(r.b)();return n.a.createElement("div",null,n.a.createElement(f,{step1:!0,step2:!0}),n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:a=>{var l;a.preventDefault(),E((l={address:t,city:c,postalCode:o,country:m},e=>{e({type:"CART_SAVE_SHIPPING",payload:l})})),e.history.push("payment")}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"Shipping")),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"address"},"Address"),n.a.createElement("input",{type:"text",name:"address",id:"address",onChange:e=>a(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"city"},"City"),n.a.createElement("input",{type:"text",name:"city",id:"city",onChange:e=>i(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"postalCode"},"Postal Code"),n.a.createElement("input",{type:"text",name:"postalCode",id:"postalCode",onChange:e=>s(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"country"},"Country"),n.a.createElement("input",{type:"text",name:"country",id:"country",onChange:e=>u(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Continue"))))))};var O=function(e){const[t,a]=Object(l.useState)(""),c=Object(r.b)();return n.a.createElement("div",null,n.a.createElement(f,{step1:!0,step2:!0,step3:!0}),n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:a=>{var l;a.preventDefault(),c((l={paymentMethod:t},e=>{e({type:"CART_SAVE_PAYMENT",payload:l})})),e.history.push("placeorder")}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"Payment")),n.a.createElement("li",null,n.a.createElement("div",null,n.a.createElement("input",{type:"radio",name:"paymentMethod",id:"paymentMethod",value:"paypal",onChange:e=>a(e.target.value)}),n.a.createElement("label",{for:"paymentMethod"},"Paypal"))),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Continue"))))))};var I=function(e){const t=Object(r.c)(e=>e.cart),a=Object(r.c)(e=>e.orderCreate),{loading:c,success:i,error:s,order:m}=a,{cartItems:E,shipping:d,payment:p}=t;d.address?p.paymentMethod||e.history.push("/payment"):e.history.push("/shipping");const y=E.reduce((e,t)=>e+t.price*t.qty,0),g=y>100?0:10,S=.15*y,h=y+g+S,v=Object(r.b)();return Object(l.useEffect)(()=>{i&&e.history.push("/order/"+m._id)},[i]),n.a.createElement("div",null,n.a.createElement(f,{step1:!0,step2:!0,step3:!0,step4:!0}),n.a.createElement("div",{className:"placeorder"},n.a.createElement("div",{className:"placeorder-info"},n.a.createElement("div",null,n.a.createElement("h3",null,"Shipping"),n.a.createElement("div",null,t.shipping.address,", ",t.shipping.city,",",t.shipping.postalCode,", ",t.shipping.country,",")),n.a.createElement("div",null,n.a.createElement("h3",null,"Payment"),n.a.createElement("div",null,"Payment Method: ",t.payment.paymentMethod)),n.a.createElement("div",null,n.a.createElement("ul",{className:"cart-list-container"},n.a.createElement("li",null,n.a.createElement("h3",null,"Shopping Cart"),n.a.createElement("div",null,"Price")),0===E.length?n.a.createElement("div",null,"Cart is empty"):E.map(e=>n.a.createElement("li",null,n.a.createElement("div",{className:"cart-image"},n.a.createElement("img",{src:e.image,alt:"product"})),n.a.createElement("div",{className:"cart-name"},n.a.createElement("div",null,n.a.createElement(o.b,{to:"/product/"+e.product},e.name)),n.a.createElement("div",null,"Qty: ",e.qty)),n.a.createElement("div",{className:"cart-price"},"$",e.price)))))),n.a.createElement("div",{className:"placeorder-action"},n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("button",{className:"button primary full-width",onClick:()=>{v((e=>async(t,a)=>{try{t({type:"ORDER_CREATE_REQUEST",payload:e});const{userSignin:{userInfo:l}}=a(),{data:{data:n}}=await u.a.post("/api/orders",e,{headers:{Authorization:" Bearer "+l.token}});t({type:"ORDER_CREATE_SUCCESS",payload:n})}catch(s){t({type:"ORDER_CREATE_FAIL",payload:s.message})}})({orderItems:E,shipping:d,payment:p,itemsPrice:y,shippingPrice:g,taxPrice:S,totalPrice:h}))}},"Place Order")),n.a.createElement("li",null,n.a.createElement("h3",null,"Order Summary")),n.a.createElement("li",null,n.a.createElement("div",null,"Items"),n.a.createElement("div",null,"$",y)),n.a.createElement("li",null,n.a.createElement("div",null,"Shipping"),n.a.createElement("div",null,"$",g)),n.a.createElement("li",null,n.a.createElement("div",null,"Tax"),n.a.createElement("div",null,"$",S)),n.a.createElement("li",null,n.a.createElement("div",null,"Order Total"),n.a.createElement("div",null,"$",h))))))};var T=function(e){const[t,a]=Object(l.useState)(!1);if(Object(l.useEffect)(()=>(window.paypal||(async()=>{const e=(await u.a.get("/api/config/paypal")).data,t=document.createElement("script");t.type="text/javascript",t.src="https://www.paypal.com/sdk/js?client-id="+e,t.async=!0,t.onload=()=>{a(!0)},document.body.appendChild(t)})(),()=>{}),[]),!t)return n.a.createElement("div",null,"Loading...");const r=window.paypal.Buttons.driver("react",{React:n.a,ReactDOM:i.a});return n.a.createElement(r,Object.assign({},e,{createOrder:(t,a)=>((t,a)=>a.order.create({purchase_units:[{amount:{currency_code:"USD",value:e.amount}}]}))(0,a),onApprove:(t,a)=>((t,a)=>a.order.capture().then(a=>e.onSuccess(t,a)).catch(e=>console.log(e)))(t,a)}))};var D=function(e){const t=Object(r.c)(e=>e.orderPay),{loading:a,success:c,error:i}=t,s=Object(r.b)();Object(l.useEffect)(()=>{var t;return c?e.history.push("/profile"):s((t=e.match.params.id,async(e,a)=>{try{e({type:"ORDER_DETAILS_REQUEST",payload:t});const{userSignin:{userInfo:l}}=a(),{data:n}=await u.a.get("/api/orders/"+t,{headers:{Authorization:"Bearer "+l.token}});e({type:"ORDER_DETAILS_SUCCESS",payload:n})}catch(p){e({type:"ORDER_DETAILS_FAIL",payload:p.message})}})),()=>{}},[c]);const m=Object(r.c)(e=>e.orderDetails),{loading:E,order:d,error:p}=m;return E?n.a.createElement("div",null,"Loading ..."):p?n.a.createElement("div",null,p):n.a.createElement("div",null,n.a.createElement("div",{className:"placeorder"},n.a.createElement("div",{className:"placeorder-info"},n.a.createElement("div",null,n.a.createElement("h3",null,"Shipping"),n.a.createElement("div",null,d.shipping.address,", ",d.shipping.city,",",d.shipping.postalCode,", ",d.shipping.country,","),n.a.createElement("div",null,d.isDelivered?"Delivered at "+d.deliveredAt:"Not Delivered.")),n.a.createElement("div",null,n.a.createElement("h3",null,"Payment"),n.a.createElement("div",null,"Payment Method: ",d.payment.paymentMethod),n.a.createElement("div",null,d.isPaid?"Paid at "+d.paidAt:"Not Paid.")),n.a.createElement("div",null,n.a.createElement("ul",{className:"cart-list-container"},n.a.createElement("li",null,n.a.createElement("h3",null,"Shopping Cart"),n.a.createElement("div",null,"Price")),0===d.orderItems.length?n.a.createElement("div",null,"Cart is empty"):d.orderItems.map(e=>n.a.createElement("li",{key:e._id},n.a.createElement("div",{className:"cart-image"},n.a.createElement("img",{src:e.image,alt:"product"})),n.a.createElement("div",{className:"cart-name"},n.a.createElement("div",null,n.a.createElement(o.b,{to:"/product/"+e.product},e.name)),n.a.createElement("div",null,"Qty: ",e.qty)),n.a.createElement("div",{className:"cart-price"},"$",e.price)))))),n.a.createElement("div",{className:"placeorder-action"},n.a.createElement("ul",null,n.a.createElement("li",{className:"placeorder-actions-payment"},a&&n.a.createElement("div",null,"Finishing Payment..."),!d.isPaid&&n.a.createElement(T,{amount:d.totalPrice,onSuccess:e=>{s(((e,t)=>async(a,l)=>{try{a({type:"ORDER_PAY_REQUEST",payload:t});const{userSignin:{userInfo:n}}=l(),{data:r}=await u.a.put("/api/orders/"+e._id+"/pay",t,{headers:{Authorization:"Bearer "+n.token}});a({type:"ORDER_PAY_SUCCESS",payload:r})}catch(p){a({type:"ORDER_PAY_FAIL",payload:p.message})}})(d,e))}})),n.a.createElement("li",null,n.a.createElement("h3",null,"Order Summary")),n.a.createElement("li",null,n.a.createElement("div",null,"Items"),n.a.createElement("div",null,"$",d.itemsPrice)),n.a.createElement("li",null,n.a.createElement("div",null,"Shipping"),n.a.createElement("div",null,"$",d.shippingPrice)),n.a.createElement("li",null,n.a.createElement("div",null,"Tax"),n.a.createElement("div",null,"$",d.taxPrice)),n.a.createElement("li",null,n.a.createElement("div",null,"Order Total"),n.a.createElement("div",null,"$",d.totalPrice))))))};var N=function(e){const[t,a]=Object(l.useState)(""),[c,i]=Object(l.useState)(""),[s,m]=Object(l.useState)(""),E=Object(r.b)(),d=Object(r.c)(e=>e.userSignin),{userInfo:p}=d,y=Object(r.c)(e=>e.userUpdate),{loading:g,success:h,error:v}=y,_=Object(r.c)(e=>e.myOrderList),{loading:b,orders:R,error:f}=_;return Object(l.useEffect)(()=>(p&&(console.log(p.name),m(p.email),a(p.name),i(p.password)),E(async(e,t)=>{try{e({type:"MY_ORDER_LIST_REQUEST"});const{userSignin:{userInfo:a}}=t(),{data:l}=await u.a.get("/api/orders/mine",{headers:{Authorization:"Bearer "+a.token}});e({type:"MY_ORDER_LIST_SUCCESS",payload:l})}catch(v){e({type:"MY_ORDER_LIST_FAIL",payload:v.message})}}),()=>{}),[p]),n.a.createElement("div",{className:"profile"},n.a.createElement("div",{className:"profile-info"},n.a.createElement("div",{className:"form"},n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),E((e=>{let{userId:t,name:a,email:l,password:n}=e;return async(e,r)=>{const{userSignin:{userInfo:c}}=r();e({type:"USER_UPDATE_REQUEST",payload:{userId:t,name:a,email:l,password:n}});try{const{data:r}=await u.a.put("/api/users/"+t,{name:a,email:l,password:n},{headers:{Authorization:"Bearer "+c.token}});e({type:"USER_UPDATE_SUCCESS",payload:r}),S.a.set("userInfo",JSON.stringify(r))}catch(v){e({type:"USER_UPDATE_FAIL",payload:v.message})}}})({userId:p._id,email:s,name:t,password:c}))}},n.a.createElement("ul",{className:"form-container"},n.a.createElement("li",null,n.a.createElement("h2",null,"User Profile")),n.a.createElement("li",null,g&&n.a.createElement("div",null,"Loading..."),v&&n.a.createElement("div",null,v),h&&n.a.createElement("div",null,"Profile Saved Successfully.")),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{value:t,type:"name",name:"name",id:"name",onChange:e=>a(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{value:s,type:"email",name:"email",id:"email",onChange:e=>m(e.target.value)})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{value:c,type:"password",id:"password",name:"password",onChange:e=>i(e.target.value)})),n.a.createElement("li",null,n.a.createElement("button",{type:"submit",className:"button primary"},"Update")),n.a.createElement("li",null,n.a.createElement("button",{type:"button",onClick:()=>{E(e=>{S.a.remove("userInfo"),e({type:"USER_LOGOUT"})}),e.history.push("/signin")},className:"button secondary full-width"},"Logout")))))),n.a.createElement("div",{className:"profile-orders content-margined"},b?n.a.createElement("div",null,"Loading..."):f?n.a.createElement("div",null,f," "):n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"ID"),n.a.createElement("th",null,"DATE"),n.a.createElement("th",null,"TOTAL"),n.a.createElement("th",null,"PAID"),n.a.createElement("th",null,"ACTIONS"))),n.a.createElement("tbody",null,R.map(e=>n.a.createElement("tr",{key:e._id},n.a.createElement("td",null,e._id),n.a.createElement("td",null,e.createdAt),n.a.createElement("td",null,e.totalPrice),n.a.createElement("td",null,e.isPaid),n.a.createElement("td",null,n.a.createElement(o.b,{to:"/order/"+e._id},"DETAILS"))))))))};var A=function(e){const t=Object(r.c)(e=>e.orderList),{loading:a,orders:c,error:i}=t,s=Object(r.c)(e=>e.orderDelete),{loading:m,success:E,error:d}=s,p=Object(r.b)();Object(l.useEffect)(()=>(p(async(e,t)=>{try{e({type:"ORDER_LIST_REQUEST"});const{userSignin:{userInfo:a}}=t(),{data:l}=await u.a.get("/api/orders",{headers:{Authorization:"Bearer "+a.token}});e({type:"ORDER_LIST_SUCCESS",payload:l})}catch(i){e({type:"ORDER_LIST_FAIL",payload:i.message})}}),()=>{}),[E]);const y=e=>{var t;p((t=e._id,async(e,a)=>{try{e({type:"ORDER_DELETE_REQUEST",payload:t});const{userSignin:{userInfo:l}}=a(),{data:n}=await u.a.delete("/api/orders/"+t,{headers:{Authorization:"Bearer "+l.token}});e({type:"ORDER_DELETE_SUCCESS",payload:n})}catch(i){e({type:"ORDER_DELETE_FAIL",payload:i.message})}}))};return a?n.a.createElement("div",null,"Loading..."):n.a.createElement("div",{className:"content content-margined"},n.a.createElement("div",{className:"order-header"},n.a.createElement("h3",null,"Orders")),n.a.createElement("div",{className:"order-list"},n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"ID"),n.a.createElement("th",null,"DATE"),n.a.createElement("th",null,"TOTAL"),n.a.createElement("th",null,"USER"),n.a.createElement("th",null,"PAID"),n.a.createElement("th",null,"PAID AT"),n.a.createElement("th",null,"DELIVERED"),n.a.createElement("th",null,"DELIVERED AT"),n.a.createElement("th",null,"ACTIONS"))),n.a.createElement("tbody",null,c.map(e=>n.a.createElement("tr",{key:e._id},n.a.createElement("td",null,e._id),n.a.createElement("td",null,e.createdAt),n.a.createElement("td",null,e.totalPrice),n.a.createElement("td",null,e.user.name),n.a.createElement("td",null,e.isPaid.toString()),n.a.createElement("td",null,e.paidAt),n.a.createElement("td",null,e.isDelivered.toString()),n.a.createElement("td",null,e.deliveredAt),n.a.createElement("td",null,n.a.createElement(o.b,{to:"/order/"+e._id,className:"button secondary"},"Details")," ",n.a.createElement("button",{type:"button",onClick:()=>y(e),className:"button secondary"},"Delete"))))))))};var U=function(){const e=Object(r.c)(e=>e.userSignin),{userInfo:t}=e;return n.a.createElement(o.a,null,n.a.createElement("div",{className:"grid-container"},n.a.createElement("header",{className:"header"},n.a.createElement("div",{className:"brand"},n.a.createElement("button",{onClick:()=>{document.querySelector(".sidebar").classList.add("open")}},"\u2630"),n.a.createElement(o.b,{to:"/"},"amazona")),n.a.createElement("div",{className:"header-links"},n.a.createElement("a",{href:"cart.html"},"Cart"),t?n.a.createElement(o.b,{to:"/profile"},t.name):n.a.createElement(o.b,{to:"/signin"},"Sign In"),t&&t.isAdmin&&n.a.createElement("div",{className:"dropdown"},n.a.createElement("a",{href:"#"},"Admin"),n.a.createElement("ul",{className:"dropdown-content"},n.a.createElement("li",null,n.a.createElement(o.b,{to:"/orders"},"Orders"),n.a.createElement(o.b,{to:"/products"},"Products")))))),n.a.createElement("aside",{className:"sidebar"},n.a.createElement("h3",null,"Shopping Categories"),n.a.createElement("button",{className:"sidebar-close-button",onClick:()=>{document.querySelector(".sidebar").classList.remove("open")}},"x"),n.a.createElement("ul",{className:"categories"},n.a.createElement("li",null,n.a.createElement(o.b,{to:"/category/Pants"},"Pants")),n.a.createElement("li",null,n.a.createElement(o.b,{to:"/category/Shirts"},"Shirts")))),n.a.createElement("main",{className:"main"},n.a.createElement("div",{className:"content"},n.a.createElement(s.a,{path:"/orders",component:A}),n.a.createElement(s.a,{path:"/profile",component:N}),n.a.createElement(s.a,{path:"/order/:id",component:D}),n.a.createElement(s.a,{path:"/products",component:R}),n.a.createElement(s.a,{path:"/shipping",component:C}),n.a.createElement(s.a,{path:"/payment",component:O}),n.a.createElement(s.a,{path:"/placeorder",component:I}),n.a.createElement(s.a,{path:"/signin",component:_}),n.a.createElement(s.a,{path:"/register",component:b}),n.a.createElement(s.a,{path:"/product/:id",component:y}),n.a.createElement(s.a,{path:"/cart/:id?",component:v}),n.a.createElement(s.a,{path:"/category/:id",component:p}),n.a.createElement(s.a,{path:"/",exact:!0,component:p}))),n.a.createElement("footer",{className:"footer"},"All right reserved.")))},P=a(15),w=a(28);const L={cart:{cartItems:S.a.getJSON("cartItems")||[],shipping:{},payment:{}},userSignin:{userInfo:S.a.getJSON("userInfo")||null}},j=Object(P.b)({productList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:t.payload};case"PRODUCT_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},productDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DETAILS_REQUEST":return{loading:!0};case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:t.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},cart:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shipping:{},payment:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CART_ADD_ITEM":const a=t.payload,l=e.cartItems.find(e=>e.product===a.product);return l?{cartItems:e.cartItems.map(e=>e.product===l.product?a:e)}:{cartItems:[...e.cartItems,a]};case"CART_REMOVE_ITEM":return{cartItems:e.cartItems.filter(e=>e.product!==t.payload)};case"CART_SAVE_SHIPPING":return{...e,shipping:t.payload};case"CART_SAVE_PAYMENT":return{...e,payment:t.payload};default:return e}},userSignin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_SIGNIN_REQUEST":return{loading:!0};case"USER_SIGNIN_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_SIGNIN_FAIL":return{loading:!1,error:t.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:t.payload};default:return e}},productSave:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_SAVE_REQUEST":return{loading:!0};case"PRODUCT_SAVE_SUCCESS":return{loading:!1,success:!0,product:t.payload};case"PRODUCT_SAVE_FAIL":return{loading:!1,error:t.payload};default:return e}},productDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_DELETE_REQUEST":return{loading:!0};case"PRODUCT_DELETE_SUCCESS":return{loading:!1,product:t.payload,success:!0};case"PRODUCT_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}},productReviewSave:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_REVIEW_SAVE_REQUEST":return{loading:!0};case"PRODUCT_REVIEW_SAVE_SUCCESS":return{loading:!1,review:t.payload,success:!0};case"PRODUCT_REVIEW_SAVE_FAIL":return{loading:!1,errror:t.payload};case"PRODUCT_REVIEW_SAVE_RESET":return{};default:return e}},orderCreate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_CREATE_REQUEST":return{loading:!0};case"ORDER_CREATE_SUCCESS":return{loading:!1,order:t.payload,success:!0};case"ORDER_CREATE_FAIL":return{loading:!1,error:t.payload};default:return e}},orderDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DETAILS_REQUEST":return{loading:!0};case"ORDER_DETAILS_SUCCESS":return{loading:!1,order:t.payload};case"ORDER_DETAILS_FAIL":return{loading:!1,error:t.payload};default:return e}},orderPay:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_PAY_REQUEST":return{loading:!0};case"ORDER_PAY_SUCCESS":return{loading:!1,success:!0};case"ORDER_PAY_FAIL":return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_UPDATE_REQUEST":return{loading:!0};case"USER_UPDATE_SUCCESS":return{loading:!1,userInfo:t.payload};case"USER_UPDATE_FAIL":return{loading:!1,error:t.payload};default:return e}},myOrderList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MY_ORDER_LIST_REQUEST":return{loading:!0};case"MY_ORDER_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"MY_ORDER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},orderList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_LIST_REQUEST":return{loading:!0};case"ORDER_LIST_SUCCESS":return{loading:!1,orders:t.payload};case"ORDER_LIST_FAIL":return{loading:!1,error:t.payload};default:return e}},orderDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{order:{orderItems:[],shipping:{},payment:{}}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ORDER_DELETE_REQUEST":return{loading:!0};case"ORDER_DELETE_SUCCESS":return{loading:!1,success:!0};case"ORDER_DELETE_FAIL":return{loading:!1,error:t.payload};default:return e}}}),k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c;var F=Object(P.d)(j,L,k(Object(P.a)(w.a)));i.a.render(n.a.createElement(r.a,{store:F},n.a.createElement(U,null)),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.8d6ba8a5.chunk.js.map