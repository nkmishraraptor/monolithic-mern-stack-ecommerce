{"ast":null,"code":"import Axios from\"axios\";import Cookie from'js-cookie';import{USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNIN_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS,USER_REGISTER_FAIL,USER_LOGOUT,USER_UPDATE_REQUEST,USER_UPDATE_SUCCESS,USER_UPDATE_FAIL}from\"../constants/userConstants\";const update=_ref=>{let{userId,name,email,password}=_ref;return async(dispatch,getState)=>{const{userSignin:{userInfo}}=getState();dispatch({type:USER_UPDATE_REQUEST,payload:{userId,name,email,password}});try{const{data}=await Axios.put(\"/api/users/\"+userId,{name,email,password},{headers:{Authorization:'Bearer '+userInfo.token}});dispatch({type:USER_UPDATE_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));}catch(error){dispatch({type:USER_UPDATE_FAIL,payload:error.message});}};};const signin=(email,password)=>async dispatch=>{dispatch({type:USER_SIGNIN_REQUEST,payload:{email,password}});try{const{data}=await Axios.post(\"/api/users/signin\",{email,password});dispatch({type:USER_SIGNIN_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));}catch(error){dispatch({type:USER_SIGNIN_FAIL,payload:error.message});}};const register=(name,email,password)=>async dispatch=>{dispatch({type:USER_REGISTER_REQUEST,payload:{name,email,password}});try{const{data}=await Axios.post(\"/api/users/register\",{name,email,password});dispatch({type:USER_REGISTER_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));}catch(error){dispatch({type:USER_REGISTER_FAIL,payload:error.message});}};const logout=()=>dispatch=>{Cookie.remove(\"userInfo\");dispatch({type:USER_LOGOUT});};export{signin,register,logout,update};","map":{"version":3,"names":["Axios","Cookie","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_LOGOUT","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","update","_ref","userId","name","email","password","dispatch","getState","userSignin","userInfo","type","payload","data","put","headers","Authorization","token","set","JSON","stringify","error","message","signin","post","register","logout","remove"],"sources":["/var/www/html/rpt-mm1/frontend/src/actions/userActions.js"],"sourcesContent":["import Axios from \"axios\";\nimport Cookie from 'js-cookie';\nimport {\n  USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS,\n  USER_SIGNIN_FAIL, USER_REGISTER_REQUEST,\n  USER_REGISTER_SUCCESS, USER_REGISTER_FAIL, USER_LOGOUT, USER_UPDATE_REQUEST, USER_UPDATE_SUCCESS, USER_UPDATE_FAIL\n} from \"../constants/userConstants\";\n\nconst update = ({ userId, name, email, password }) => async (dispatch, getState) => {\n  const { userSignin: { userInfo } } = getState();\n  dispatch({ type: USER_UPDATE_REQUEST, payload: { userId, name, email, password } });\n  try {\n    const { data } = await Axios.put(\"/api/users/\" + userId,\n      { name, email, password }, {\n      headers: {\n        Authorization: 'Bearer ' + userInfo.token\n      }\n    });\n    dispatch({ type: USER_UPDATE_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_UPDATE_FAIL, payload: error.message });\n  }\n}\n\nconst signin = (email, password) => async (dispatch) => {\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password } });\n  try {\n    const { data } = await Axios.post(\"/api/users/signin\", { email, password });\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_SIGNIN_FAIL, payload: error.message });\n  }\n}\n\nconst register = (name, email, password) => async (dispatch) => {\n  dispatch({ type: USER_REGISTER_REQUEST, payload: { name, email, password } });\n  try {\n    const { data } = await Axios.post(\"/api/users/register\", { name, email, password });\n    dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({ type: USER_REGISTER_FAIL, payload: error.message });\n  }\n}\n\nconst logout = () => (dispatch) => {\n  Cookie.remove(\"userInfo\");\n  dispatch({ type: USER_LOGOUT })\n}\nexport { signin, register, logout, update };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}