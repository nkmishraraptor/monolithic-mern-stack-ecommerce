{"ast":null,"code":"import React,{useEffect}from'react';import{addToCart,removeFromCart}from'../actions/cartActions';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';function CartScreen(props){const cart=useSelector(state=>state.cart);const{cartItems}=cart;const productId=props.match.params.id;const qty=props.location.search?Number(props.location.search.split(\"=\")[1]):1;const dispatch=useDispatch();const removeFromCartHandler=productId=>{dispatch(removeFromCart(productId));};useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[]);const checkoutHandler=()=>{props.history.push(\"/signin?redirect=shipping\");};return/*#__PURE__*/React.createElement(\"div\",{className:\"cart\"},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-list\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(item=>/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty:\",/*#__PURE__*/React.createElement(\"select\",{value:item.qty,onChange:e=>dispatch(addToCart(item.product,e.target.value))},[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1))),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"button\",onClick:()=>removeFromCartHandler(item.product)},\"Delete\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price))))),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-action\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Subtotal ( \",cartItems.reduce((a,c)=>a+c.qty,0),\" items) : $ \",cartItems.reduce((a,c)=>a+c.price*c.qty,0)),/*#__PURE__*/React.createElement(\"button\",{onClick:checkoutHandler,className:\"button primary full-width\",disabled:cartItems.length===0},\"Proceed to Checkout\")));}export default CartScreen;","map":{"version":3,"names":["React","useEffect","addToCart","removeFromCart","useDispatch","useSelector","Link","CartScreen","props","cart","state","cartItems","productId","match","params","id","qty","location","search","Number","split","dispatch","removeFromCartHandler","checkoutHandler","history","push","createElement","className","length","map","item","src","image","alt","to","product","name","value","onChange","e","target","Array","countInStock","keys","x","key","type","onClick","price","reduce","a","c","disabled"],"sources":["/var/www/html/rpt-mm1/frontend/src/screens/CartScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { addToCart, removeFromCart } from '../actions/cartActions';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nfunction CartScreen(props) {\n\n  const cart = useSelector(state => state.cart);\n\n  const { cartItems } = cart;\n\n  const productId = props.match.params.id;\n  const qty = props.location.search ? Number(props.location.search.split(\"=\")[1]) : 1;\n  const dispatch = useDispatch();\n  const removeFromCartHandler = (productId) => {\n    dispatch(removeFromCart(productId));\n  }\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, []);\n\n  const checkoutHandler = () => {\n    props.history.push(\"/signin?redirect=shipping\");\n  }\n\n  return <div className=\"cart\">\n    <div className=\"cart-list\">\n      <ul className=\"cart-list-container\">\n        <li>\n          <h3>\n            Shopping Cart\n          </h3>\n          <div>\n            Price\n          </div>\n        </li>\n        {\n          cartItems.length === 0 ?\n            <div>\n              Cart is empty\n          </div>\n            :\n            cartItems.map(item =>\n              <li>\n                <div className=\"cart-image\">\n                  <img src={item.image} alt=\"product\" />\n                </div>\n                <div className=\"cart-name\">\n                  <div>\n                    <Link to={\"/product/\" + item.product}>\n                      {item.name}\n                    </Link>\n\n                  </div>\n                  <div>\n                    Qty:\n                  <select value={item.qty} onChange={(e) => dispatch(addToCart(item.product, e.target.value))}>\n                      {[...Array(item.countInStock).keys()].map(x =>\n                        <option key={x + 1} value={x + 1}>{x + 1}</option>\n                      )}\n                    </select>\n                    <button type=\"button\" className=\"button\" onClick={() => removeFromCartHandler(item.product)} >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n                <div className=\"cart-price\">\n                  ${item.price}\n                </div>\n              </li>\n            )\n        }\n      </ul>\n\n    </div>\n    <div className=\"cart-action\">\n      <h3>\n        Subtotal ( {cartItems.reduce((a, c) => a + c.qty, 0)} items)\n        :\n         $ {cartItems.reduce((a, c) => a + c.price * c.qty, 0)}\n      </h3>\n      <button onClick={checkoutHandler} className=\"button primary full-width\" disabled={cartItems.length === 0}>\n        Proceed to Checkout\n      </button>\n\n    </div>\n\n  </div>\n}\n\nexport default CartScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}