{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{createOrder,detailsOrder,payOrder}from'../actions/orderActions';import PaypalButton from'../components/PaypalButton';function OrderScreen(props){const orderPay=useSelector(state=>state.orderPay);const{loading:loadingPay,success:successPay,error:errorPay}=orderPay;const dispatch=useDispatch();useEffect(()=>{if(successPay){props.history.push(\"/profile\");}else{dispatch(detailsOrder(props.match.params.id));}return()=>{};},[successPay]);const handleSuccessPayment=paymentResult=>{dispatch(payOrder(order,paymentResult));};const orderDetails=useSelector(state=>state.orderDetails);const{loading,order,error}=orderDetails;return loading?/*#__PURE__*/React.createElement(\"div\",null,\"Loading ...\"):error?/*#__PURE__*/React.createElement(\"div\",null,error):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,order.shipping.address,\", \",order.shipping.city,\",\",order.shipping.postalCode,\", \",order.shipping.country,\",\"),/*#__PURE__*/React.createElement(\"div\",null,order.isDelivered?\"Delivered at \"+order.deliveredAt:\"Not Delivered.\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",order.payment.paymentMethod),/*#__PURE__*/React.createElement(\"div\",null,order.isPaid?\"Paid at \"+order.paidAt:\"Not Paid.\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),order.orderItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):order.orderItems.map(item=>/*#__PURE__*/React.createElement(\"li\",{key:item._id},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",{className:\"placeorder-actions-payment\"},loadingPay&&/*#__PURE__*/React.createElement(\"div\",null,\"Finishing Payment...\"),!order.isPaid&&/*#__PURE__*/React.createElement(PaypalButton,{amount:order.totalPrice,onSuccess:handleSuccessPayment})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",order.itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",order.shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",order.taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",order.totalPrice))))));}export default OrderScreen;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","createOrder","detailsOrder","payOrder","PaypalButton","OrderScreen","props","orderPay","state","loading","loadingPay","success","successPay","error","errorPay","dispatch","history","push","match","params","id","handleSuccessPayment","paymentResult","order","orderDetails","createElement","className","shipping","address","city","postalCode","country","isDelivered","deliveredAt","payment","paymentMethod","isPaid","paidAt","orderItems","length","map","item","key","_id","src","image","alt","to","product","name","qty","price","amount","totalPrice","onSuccess","itemsPrice","shippingPrice","taxPrice"],"sources":["/var/www/html/rpt-mm1/frontend/src/screens/OrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { createOrder, detailsOrder, payOrder } from '../actions/orderActions';\nimport PaypalButton from '../components/PaypalButton';\nfunction OrderScreen(props) {\n\n  const orderPay = useSelector(state => state.orderPay);\n  const { loading: loadingPay, success: successPay, error: errorPay } = orderPay;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (successPay) {\n      props.history.push(\"/profile\");\n    } else {\n      dispatch(detailsOrder(props.match.params.id));\n    }\n    return () => {\n    };\n  }, [successPay]);\n\n  const handleSuccessPayment = (paymentResult) => {\n    dispatch(payOrder(order, paymentResult));\n  }\n\n  const orderDetails = useSelector(state => state.orderDetails);\n  const { loading, order, error } = orderDetails;\n\n  return loading ? <div>Loading ...</div> : error ? <div>{error}</div> :\n\n    <div>\n      <div className=\"placeorder\">\n        <div className=\"placeorder-info\">\n          <div>\n            <h3>\n              Shipping\n          </h3>\n            <div>\n              {order.shipping.address}, {order.shipping.city},\n          {order.shipping.postalCode}, {order.shipping.country},\n          </div>\n            <div>\n              {order.isDelivered ? \"Delivered at \" + order.deliveredAt : \"Not Delivered.\"}\n            </div>\n          </div>\n          <div>\n            <h3>Payment</h3>\n            <div>\n              Payment Method: {order.payment.paymentMethod}\n            </div>\n            <div>\n              {order.isPaid ? \"Paid at \" + order.paidAt : \"Not Paid.\"}\n            </div>\n          </div>\n          <div>\n            <ul className=\"cart-list-container\">\n              <li>\n                <h3>\n                  Shopping Cart\n          </h3>\n                <div>\n                  Price\n          </div>\n              </li>\n              {\n                order.orderItems.length === 0 ?\n                  <div>\n                    Cart is empty\n          </div>\n                  :\n                  order.orderItems.map(item =>\n                    <li key={item._id}>\n                      <div className=\"cart-image\">\n                        <img src={item.image} alt=\"product\" />\n                      </div>\n                      <div className=\"cart-name\">\n                        <div>\n                          <Link to={\"/product/\" + item.product}>\n                            {item.name}\n                          </Link>\n\n                        </div>\n                        <div>\n                          Qty: {item.qty}\n                        </div>\n                      </div>\n                      <div className=\"cart-price\">\n                        ${item.price}\n                      </div>\n                    </li>\n                  )\n              }\n            </ul>\n          </div>\n\n\n        </div>\n        <div className=\"placeorder-action\">\n          <ul>\n            <li className=\"placeorder-actions-payment\">\n              {loadingPay && <div>Finishing Payment...</div>}\n              {!order.isPaid &&\n                <PaypalButton\n                  amount={order.totalPrice}\n                  onSuccess={handleSuccessPayment} />\n              }\n            </li>\n            <li>\n              <h3>Order Summary</h3>\n            </li>\n            <li>\n              <div>Items</div>\n              <div>${order.itemsPrice}</div>\n            </li>\n            <li>\n              <div>Shipping</div>\n              <div>${order.shippingPrice}</div>\n            </li>\n            <li>\n              <div>Tax</div>\n              <div>${order.taxPrice}</div>\n            </li>\n            <li>\n              <div>Order Total</div>\n              <div>${order.totalPrice}</div>\n            </li>\n          </ul>\n\n\n\n        </div>\n\n      </div>\n    </div>\n\n}\n\nexport default OrderScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}