{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{logout,update}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';import{useDispatch,useSelector}from'react-redux';function ProfileScreen(props){const[name,setName]=useState('');const[password,setPassword]=useState('');const[email,setEmail]=useState('');const dispatch=useDispatch();const userSignin=useSelector(state=>state.userSignin);const{userInfo}=userSignin;const handleLogout=()=>{dispatch(logout());props.history.push(\"/signin\");};const submitHandler=e=>{e.preventDefault();dispatch(update({userId:userInfo._id,email,name,password}));};const userUpdate=useSelector(state=>state.userUpdate);const{loading,success,error}=userUpdate;const myOrderList=useSelector(state=>state.myOrderList);const{loading:loadingOrders,orders,error:errorOrders}=myOrderList;useEffect(()=>{if(userInfo){console.log(userInfo.name);setEmail(userInfo.email);setName(userInfo.name);setPassword(userInfo.password);}dispatch(listMyOrders());return()=>{};},[userInfo]);return/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"ul\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"User Profile\")),/*#__PURE__*/React.createElement(\"li\",null,loading&&/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"),error&&/*#__PURE__*/React.createElement(\"div\",null,error),success&&/*#__PURE__*/React.createElement(\"div\",null,\"Profile Saved Successfully.\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{value:name,type:\"name\",name:\"name\",id:\"name\",onChange:e=>setName(e.target.value)})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{value:email,type:\"email\",name:\"email\",id:\"email\",onChange:e=>setEmail(e.target.value)})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{value:password,type:\"password\",id:\"password\",name:\"password\",onChange:e=>setPassword(e.target.value)})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"button primary\"},\"Update\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleLogout,className:\"button secondary full-width\"},\"Logout\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-orders content-margined\"},loadingOrders?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):errorOrders?/*#__PURE__*/React.createElement(\"div\",null,errorOrders,\" \"):/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(order=>/*#__PURE__*/React.createElement(\"tr\",{key:order._id},/*#__PURE__*/React.createElement(\"td\",null,order._id),/*#__PURE__*/React.createElement(\"td\",null,order.createdAt),/*#__PURE__*/React.createElement(\"td\",null,order.totalPrice),/*#__PURE__*/React.createElement(\"td\",null,order.isPaid),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/order/\"+order._id},\"DETAILS\"))))))));}export default ProfileScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","logout","update","listMyOrders","useDispatch","useSelector","ProfileScreen","props","name","setName","password","setPassword","email","setEmail","dispatch","userSignin","state","userInfo","handleLogout","history","push","submitHandler","e","preventDefault","userId","_id","userUpdate","loading","success","error","myOrderList","loadingOrders","orders","errorOrders","console","log","createElement","className","onSubmit","htmlFor","value","type","id","onChange","target","onClick","map","order","key","createdAt","totalPrice","isPaid","to"],"sources":["/var/www/html/rpt-mm1/frontend/src/screens/ProfileScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { logout, update } from '../actions/userActions';\nimport { listMyOrders } from '../actions/orderActions';\nimport { useDispatch, useSelector } from 'react-redux';\n\nfunction ProfileScreen(props) {\n  const [name, setName] = useState('');\n  const [password, setPassword] = useState('');\n  const [email, setEmail] = useState('');\n  const dispatch = useDispatch();\n\n  const userSignin = useSelector(state => state.userSignin);\n  const { userInfo } = userSignin;\n  const handleLogout = () => {\n    dispatch(logout());\n    props.history.push(\"/signin\");\n  }\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(update({ userId: userInfo._id, email, name, password }))\n  }\n  const userUpdate = useSelector(state => state.userUpdate);\n  const { loading, success, error } = userUpdate;\n\n  const myOrderList = useSelector(state => state.myOrderList);\n  const { loading: loadingOrders, orders, error: errorOrders } = myOrderList;\n  useEffect(() => {\n    if (userInfo) {\n      console.log(userInfo.name)\n      setEmail(userInfo.email);\n      setName(userInfo.name);\n      setPassword(userInfo.password);\n    }\n    dispatch(listMyOrders());\n    return () => {\n\n    };\n  }, [userInfo])\n\n  return <div className=\"profile\">\n    <div className=\"profile-info\">\n      <div className=\"form\">\n        <form onSubmit={submitHandler} >\n          <ul className=\"form-container\">\n            <li>\n              <h2>User Profile</h2>\n            </li>\n            <li>\n              {loading && <div>Loading...</div>}\n              {error && <div>{error}</div>}\n              {success && <div>Profile Saved Successfully.</div>}\n            </li>\n            <li>\n              <label htmlFor=\"name\">\n                Name\n          </label>\n              <input value={name} type=\"name\" name=\"name\" id=\"name\" onChange={(e) => setName(e.target.value)}>\n              </input>\n            </li>\n            <li>\n              <label htmlFor=\"email\">\n                Email\n          </label>\n              <input value={email} type=\"email\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)}>\n              </input>\n            </li>\n            <li>\n              <label htmlFor=\"password\">Password</label>\n              <input value={password} type=\"password\" id=\"password\" name=\"password\" onChange={(e) => setPassword(e.target.value)}>\n              </input>\n            </li>\n\n            <li>\n              <button type=\"submit\" className=\"button primary\">Update</button>\n            </li>\n            <li>\n              <button type=\"button\" onClick={handleLogout} className=\"button secondary full-width\">Logout</button>\n            </li>\n\n          </ul>\n        </form>\n      </div>\n    </div>\n    <div className=\"profile-orders content-margined\">\n      {\n        loadingOrders ? <div>Loading...</div> :\n          errorOrders ? <div>{errorOrders} </div> :\n            <table className=\"table\">\n              <thead>\n                <tr>\n                  <th>ID</th>\n                  <th>DATE</th>\n                  <th>TOTAL</th>\n                  <th>PAID</th>\n                  <th>ACTIONS</th>\n                </tr>\n              </thead>\n              <tbody>\n                {orders.map(order => <tr key={order._id}>\n                  <td>{order._id}</td>\n                  <td>{order.createdAt}</td>\n                  <td>{order.totalPrice}</td>\n                  <td>{order.isPaid}</td>\n                  <td>\n                    <Link to={\"/order/\" + order._id}>DETAILS</Link>\n                  </td>\n                </tr>)}\n              </tbody>\n            </table>\n      }\n    </div>\n  </div>\n}\n\nexport default ProfileScreen;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,MAAM,CAAEC,MAAM,KAAQ,wBAAwB,CACvD,OAASC,YAAY,KAAQ,yBAAyB,CACtD,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CAEtD,QAAS,CAAAC,aAAaA,CAACC,KAAK,CAAE,CAC5B,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAgB,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAW,UAAU,CAAGV,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACD,UAAU,CAAC,CACzD,KAAM,CAAEE,QAAS,CAAC,CAAGF,UAAU,CAC/B,KAAM,CAAAG,YAAY,CAAGA,CAAA,GAAM,CACzBJ,QAAQ,CAACb,MAAM,CAAC,CAAC,CAAC,CAClBM,KAAK,CAACY,OAAO,CAACC,IAAI,CAAC,SAAS,CAAC,CAC/B,CAAC,CACD,KAAM,CAAAC,aAAa,CAAIC,CAAC,EAAK,CAC3BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClBT,QAAQ,CAACZ,MAAM,CAAC,CAAEsB,MAAM,CAAEP,QAAQ,CAACQ,GAAG,CAAEb,KAAK,CAAEJ,IAAI,CAAEE,QAAS,CAAC,CAAC,CAAC,CACnE,CAAC,CACD,KAAM,CAAAgB,UAAU,CAAGrB,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACU,UAAU,CAAC,CACzD,KAAM,CAAEC,OAAO,CAAEC,OAAO,CAAEC,KAAM,CAAC,CAAGH,UAAU,CAE9C,KAAM,CAAAI,WAAW,CAAGzB,WAAW,CAACW,KAAK,EAAIA,KAAK,CAACc,WAAW,CAAC,CAC3D,KAAM,CAAEH,OAAO,CAAEI,aAAa,CAAEC,MAAM,CAAEH,KAAK,CAAEI,WAAY,CAAC,CAAGH,WAAW,CAC1E/B,SAAS,CAAC,IAAM,CACd,GAAIkB,QAAQ,CAAE,CACZiB,OAAO,CAACC,GAAG,CAAClB,QAAQ,CAACT,IAAI,CAAC,CAC1BK,QAAQ,CAACI,QAAQ,CAACL,KAAK,CAAC,CACxBH,OAAO,CAACQ,QAAQ,CAACT,IAAI,CAAC,CACtBG,WAAW,CAACM,QAAQ,CAACP,QAAQ,CAAC,CAChC,CACAI,QAAQ,CAACX,YAAY,CAAC,CAAC,CAAC,CACxB,MAAO,IAAM,CAEb,CAAC,CACH,CAAC,CAAE,CAACc,QAAQ,CAAC,CAAC,CAEd,mBAAOpB,KAAA,CAAAuC,aAAA,QAAKC,SAAS,CAAC,SAAS,eAC7BxC,KAAA,CAAAuC,aAAA,QAAKC,SAAS,CAAC,cAAc,eAC3BxC,KAAA,CAAAuC,aAAA,QAAKC,SAAS,CAAC,MAAM,eACnBxC,KAAA,CAAAuC,aAAA,SAAME,QAAQ,CAAEjB,aAAc,eAC5BxB,KAAA,CAAAuC,aAAA,OAAIC,SAAS,CAAC,gBAAgB,eAC5BxC,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,WAAI,cAAgB,CAClB,CAAC,cACLvC,KAAA,CAAAuC,aAAA,WACGT,OAAO,eAAI9B,KAAA,CAAAuC,aAAA,YAAK,YAAe,CAAC,CAChCP,KAAK,eAAIhC,KAAA,CAAAuC,aAAA,YAAMP,KAAW,CAAC,CAC3BD,OAAO,eAAI/B,KAAA,CAAAuC,aAAA,YAAK,6BAAgC,CAC/C,CAAC,cACLvC,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,UAAOG,OAAO,CAAC,MAAM,EAAC,MAEnB,CAAC,cACJ1C,KAAA,CAAAuC,aAAA,UAAOI,KAAK,CAAEhC,IAAK,CAACiC,IAAI,CAAC,MAAM,CAACjC,IAAI,CAAC,MAAM,CAACkC,EAAE,CAAC,MAAM,CAACC,QAAQ,CAAGrB,CAAC,EAAKb,OAAO,CAACa,CAAC,CAACsB,MAAM,CAACJ,KAAK,CAAE,CACxF,CACL,CAAC,cACL3C,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,UAAOG,OAAO,CAAC,OAAO,EAAC,OAEpB,CAAC,cACJ1C,KAAA,CAAAuC,aAAA,UAAOI,KAAK,CAAE5B,KAAM,CAAC6B,IAAI,CAAC,OAAO,CAACjC,IAAI,CAAC,OAAO,CAACkC,EAAE,CAAC,OAAO,CAACC,QAAQ,CAAGrB,CAAC,EAAKT,QAAQ,CAACS,CAAC,CAACsB,MAAM,CAACJ,KAAK,CAAE,CAC7F,CACL,CAAC,cACL3C,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,UAAOG,OAAO,CAAC,UAAU,EAAC,UAAe,CAAC,cAC1C1C,KAAA,CAAAuC,aAAA,UAAOI,KAAK,CAAE9B,QAAS,CAAC+B,IAAI,CAAC,UAAU,CAACC,EAAE,CAAC,UAAU,CAAClC,IAAI,CAAC,UAAU,CAACmC,QAAQ,CAAGrB,CAAC,EAAKX,WAAW,CAACW,CAAC,CAACsB,MAAM,CAACJ,KAAK,CAAE,CAC5G,CACL,CAAC,cAEL3C,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,WAAQK,IAAI,CAAC,QAAQ,CAACJ,SAAS,CAAC,gBAAgB,EAAC,QAAc,CAC7D,CAAC,cACLxC,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,WAAQK,IAAI,CAAC,QAAQ,CAACI,OAAO,CAAE3B,YAAa,CAACmB,SAAS,CAAC,6BAA6B,EAAC,QAAc,CACjG,CAEF,CACA,CACH,CACF,CAAC,cACNxC,KAAA,CAAAuC,aAAA,QAAKC,SAAS,CAAC,iCAAiC,EAE5CN,aAAa,cAAGlC,KAAA,CAAAuC,aAAA,YAAK,YAAe,CAAC,CACnCH,WAAW,cAAGpC,KAAA,CAAAuC,aAAA,YAAMH,WAAW,CAAC,GAAM,CAAC,cACrCpC,KAAA,CAAAuC,aAAA,UAAOC,SAAS,CAAC,OAAO,eACtBxC,KAAA,CAAAuC,aAAA,2BACEvC,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,WAAI,IAAM,CAAC,cACXvC,KAAA,CAAAuC,aAAA,WAAI,MAAQ,CAAC,cACbvC,KAAA,CAAAuC,aAAA,WAAI,OAAS,CAAC,cACdvC,KAAA,CAAAuC,aAAA,WAAI,MAAQ,CAAC,cACbvC,KAAA,CAAAuC,aAAA,WAAI,SAAW,CACb,CACC,CAAC,cACRvC,KAAA,CAAAuC,aAAA,cACGJ,MAAM,CAACc,GAAG,CAACC,KAAK,eAAIlD,KAAA,CAAAuC,aAAA,OAAIY,GAAG,CAAED,KAAK,CAACtB,GAAI,eACtC5B,KAAA,CAAAuC,aAAA,WAAKW,KAAK,CAACtB,GAAQ,CAAC,cACpB5B,KAAA,CAAAuC,aAAA,WAAKW,KAAK,CAACE,SAAc,CAAC,cAC1BpD,KAAA,CAAAuC,aAAA,WAAKW,KAAK,CAACG,UAAe,CAAC,cAC3BrD,KAAA,CAAAuC,aAAA,WAAKW,KAAK,CAACI,MAAW,CAAC,cACvBtD,KAAA,CAAAuC,aAAA,wBACEvC,KAAA,CAAAuC,aAAA,CAACpC,IAAI,EAACoD,EAAE,CAAE,SAAS,CAAGL,KAAK,CAACtB,GAAI,EAAC,SAAa,CAC5C,CACF,CAAC,CACA,CACF,CAEV,CACF,CAAC,CACR,CAEA,cAAe,CAAAnB,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module"}