{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){const cart=useSelector(state=>state.cart);const orderCreate=useSelector(state=>state.orderCreate);const{loading,success,error,order}=orderCreate;const{cartItems,shipping,payment}=cart;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}const itemsPrice=cartItems.reduce((a,c)=>a+c.price*c.qty,0);const shippingPrice=itemsPrice>100?0:10;const taxPrice=0.15*itemsPrice;const totalPrice=itemsPrice+shippingPrice+taxPrice;const dispatch=useDispatch();const placeOrderHandler=()=>{// create an order\ndispatch(createOrder({orderItems:cartItems,shipping,payment,itemsPrice,shippingPrice,taxPrice,totalPrice}));};useEffect(()=>{if(success){props.history.push(\"/order/\"+order._id);}},[success]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\",\",cart.shipping.postalCode,\", \",cart.shipping.country,\",\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.length===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(item=>/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"$\",item.price)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",taxPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"$\",totalPrice))))));}export default PlaceOrderScreen;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","loading","success","error","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","taxPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","createElement","step1","step2","step3","step4","className","city","postalCode","country","length","map","item","src","image","alt","to","product","name","onClick"],"sources":["/var/www/html/rpt-mm1/frontend/src/screens/PlaceOrderScreen.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport CheckoutSteps from '../components/CheckoutSteps';\nimport { createOrder } from '../actions/orderActions';\nfunction PlaceOrderScreen(props) {\n\n  const cart = useSelector(state => state.cart);\n  const orderCreate = useSelector(state => state.orderCreate);\n  const { loading, success, error, order } = orderCreate;\n\n  const { cartItems, shipping, payment } = cart;\n  if (!shipping.address) {\n    props.history.push(\"/shipping\");\n  } else if (!payment.paymentMethod) {\n    props.history.push(\"/payment\");\n  }\n  const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\n  const shippingPrice = itemsPrice > 100 ? 0 : 10;\n  const taxPrice = 0.15 * itemsPrice;\n  const totalPrice = itemsPrice + shippingPrice + taxPrice;\n\n  const dispatch = useDispatch();\n\n  const placeOrderHandler = () => {\n    // create an order\n    dispatch(createOrder({\n      orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\n      taxPrice, totalPrice\n    }));\n  }\n  useEffect(() => {\n    if (success) {\n      props.history.push(\"/order/\" + order._id);\n    }\n\n  }, [success]);\n\n  return <div>\n    <CheckoutSteps step1 step2 step3 step4 ></CheckoutSteps>\n    <div className=\"placeorder\">\n      <div className=\"placeorder-info\">\n        <div>\n          <h3>\n            Shipping\n          </h3>\n          <div>\n            {cart.shipping.address}, {cart.shipping.city},\n          {cart.shipping.postalCode}, {cart.shipping.country},\n          </div>\n        </div>\n        <div>\n          <h3>Payment</h3>\n          <div>\n            Payment Method: {cart.payment.paymentMethod}\n          </div>\n        </div>\n        <div>\n          <ul className=\"cart-list-container\">\n            <li>\n              <h3>\n                Shopping Cart\n          </h3>\n              <div>\n                Price\n          </div>\n            </li>\n            {\n              cartItems.length === 0 ?\n                <div>\n                  Cart is empty\n          </div>\n                :\n                cartItems.map(item =>\n                  <li>\n                    <div className=\"cart-image\">\n                      <img src={item.image} alt=\"product\" />\n                    </div>\n                    <div className=\"cart-name\">\n                      <div>\n                        <Link to={\"/product/\" + item.product}>\n                          {item.name}\n                        </Link>\n\n                      </div>\n                      <div>\n                        Qty: {item.qty}\n                      </div>\n                    </div>\n                    <div className=\"cart-price\">\n                      ${item.price}\n                    </div>\n                  </li>\n                )\n            }\n          </ul>\n        </div>\n\n      \n      </div>\n      <div className=\"placeorder-action\">\n        <ul>\n          <li>\n            <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\n          </li>\n          <li>\n            <h3>Order Summary</h3>\n          </li>\n          <li>\n            <div>Items</div>\n            <div>${itemsPrice}</div>\n          </li>\n          <li>\n            <div>Shipping</div>\n            <div>${shippingPrice}</div>\n          </li>\n          <li>\n            <div>Tax</div>\n            <div>${taxPrice}</div>\n          </li>\n          <li>\n            <div>Order Total</div>\n            <div>${totalPrice}</div>\n          </li>\n        </ul>\n\n\n\n      </div>\n\n    </div>\n  </div>\n\n}\n\nexport default PlaceOrderScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}