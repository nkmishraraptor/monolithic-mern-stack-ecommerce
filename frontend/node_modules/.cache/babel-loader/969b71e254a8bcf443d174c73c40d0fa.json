{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import axios from'axios';import{useSelector,useDispatch}from'react-redux';import{listProducts}from'../actions/productActions';import Rating from'../components/Rating';function HomeScreen(props){const[searchKeyword,setSearchKeyword]=useState('');const[sortOrder,setSortOrder]=useState('');const category=props.match.params.id?props.match.params.id:'';const productList=useSelector(state=>state.productList);const{products,loading,error}=productList;const dispatch=useDispatch();useEffect(()=>{dispatch(listProducts(category));return()=>{//\n};},[category]);const submitHandler=e=>{e.preventDefault();dispatch(listProducts(category,searchKeyword,sortOrder));};const sortHandler=e=>{setSortOrder(e.target.value);dispatch(listProducts(category,searchKeyword,sortOrder));};return/*#__PURE__*/React.createElement(React.Fragment,null,category&&/*#__PURE__*/React.createElement(\"h2\",null,category),/*#__PURE__*/React.createElement(\"ul\",{className:\"filter\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"input\",{name:\"searchKeyword\",onChange:e=>setSearchKeyword(e.target.value)}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Search\"))),/*#__PURE__*/React.createElement(\"li\",null,\"Sort By\",' ',/*#__PURE__*/React.createElement(\"select\",{name:\"sortOrder\",onChange:sortHandler},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Newest\"),/*#__PURE__*/React.createElement(\"option\",{value:\"lowest\"},\"Lowest\"),/*#__PURE__*/React.createElement(\"option\",{value:\"highest\"},\"Highest\")))),loading?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):error?/*#__PURE__*/React.createElement(\"div\",null,error):/*#__PURE__*/React.createElement(\"ul\",{className:\"products\"},products.map(product=>/*#__PURE__*/React.createElement(\"li\",{key:product._id},/*#__PURE__*/React.createElement(\"div\",{className:\"product\"},/*#__PURE__*/React.createElement(Link,{to:'/product/'+product._id},/*#__PURE__*/React.createElement(\"img\",{className:\"product-image\",src:product.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"product-name\"},/*#__PURE__*/React.createElement(Link,{to:'/product/'+product._id},product.name)),/*#__PURE__*/React.createElement(\"div\",{className:\"product-brand\"},product.brand),/*#__PURE__*/React.createElement(\"div\",{className:\"product-price\"},\"$\",product.price),/*#__PURE__*/React.createElement(\"div\",{className:\"product-rating\"},/*#__PURE__*/React.createElement(Rating,{value:product.rating,text:product.numReviews+' reviews'})))))));}export default HomeScreen;","map":{"version":3,"names":["React","useState","useEffect","Link","axios","useSelector","useDispatch","listProducts","Rating","HomeScreen","props","searchKeyword","setSearchKeyword","sortOrder","setSortOrder","category","match","params","id","productList","state","products","loading","error","dispatch","submitHandler","e","preventDefault","sortHandler","target","value","createElement","Fragment","className","onSubmit","name","onChange","type","map","product","key","_id","to","src","image","alt","brand","price","rating","text","numReviews"],"sources":["/var/www/html/rpt-mm1/frontend/src/screens/HomeScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { listProducts } from '../actions/productActions';\nimport Rating from '../components/Rating';\n\nfunction HomeScreen(props) {\n  const [searchKeyword, setSearchKeyword] = useState('');\n  const [sortOrder, setSortOrder] = useState('');\n  const category = props.match.params.id ? props.match.params.id : '';\n  const productList = useSelector((state) => state.productList);\n  const { products, loading, error } = productList;\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(listProducts(category));\n\n    return () => {\n      //\n    };\n  }, [category]);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(listProducts(category, searchKeyword, sortOrder));\n  };\n  const sortHandler = (e) => {\n    setSortOrder(e.target.value);\n    dispatch(listProducts(category, searchKeyword, sortOrder));\n  };\n\n  return (\n    <>\n      {category && <h2>{category}</h2>}\n\n      <ul className=\"filter\">\n        <li>\n          <form onSubmit={submitHandler}>\n            <input\n              name=\"searchKeyword\"\n              onChange={(e) => setSearchKeyword(e.target.value)}\n            />\n            <button type=\"submit\">Search</button>\n          </form>\n        </li>\n        <li>\n          Sort By{' '}\n          <select name=\"sortOrder\" onChange={sortHandler}>\n            <option value=\"\">Newest</option>\n            <option value=\"lowest\">Lowest</option>\n            <option value=\"highest\">Highest</option>\n          </select>\n        </li>\n      </ul>\n      {loading ? (\n        <div>Loading...</div>\n      ) : error ? (\n        <div>{error}</div>\n      ) : (\n        <ul className=\"products\">\n          {products.map((product) => (\n            <li key={product._id}>\n              <div className=\"product\">\n                <Link to={'/product/' + product._id}>\n                  <img\n                    className=\"product-image\"\n                    src={product.image}\n                    alt=\"product\"\n                  />\n                </Link>\n                <div className=\"product-name\">\n                  <Link to={'/product/' + product._id}>{product.name}</Link>\n                </div>\n                <div className=\"product-brand\">{product.brand}</div>\n                <div className=\"product-price\">${product.price}</div>\n                <div className=\"product-rating\">\n                  <Rating\n                    value={product.rating}\n                    text={product.numReviews + ' reviews'}\n                  />\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </>\n  );\n}\nexport default HomeScreen;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}